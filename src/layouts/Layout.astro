---
// src/layouts/Layout.astro
import '../styles/global.css';
import BackToTop from '../components/BackToTop.astro';

const { title } = Astro.props;
---

<html lang="id" class="scroll-smooth" id="html-root">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/png" href="/logo.png" />
        <title>{title}</title>
    </head>
    <body class="text-black dark:text-white font-sans antialiased selection:bg-pink-300 min-h-screen transition-colors duration-300">
        
        <slot />

        <script is:inline>
            // 1. Dark Mode
            const toggleBtn = document.getElementById('theme-toggle');
            const htmlElement = document.getElementById('html-root');

            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') htmlElement.classList.add('dark');
            else htmlElement.classList.remove('dark');

            if (toggleBtn) {
                toggleBtn.addEventListener('click', () => {
                    htmlElement.classList.toggle('dark');
                    localStorage.setItem('theme', htmlElement.classList.contains('dark') ? 'dark' : 'light');
                });
            }

            // 2. Mobile Menu
            const menuBtn = document.getElementById('menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileLinks = document.querySelectorAll('.mobile-link');

            if (menuBtn && mobileMenu) {
                menuBtn.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                    mobileMenu.classList.toggle('flex');
                });
                mobileLinks.forEach(link => link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                    mobileMenu.classList.remove('flex');
                }));
            }

            // 3. Scroll Reveal Animation
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) entry.target.classList.add('active');
                });
            });
            document.querySelectorAll('.reveal').forEach((el) => observer.observe(el));

            // Scroll and Url
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault(); // Disable fuction from add #

                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);

                    if (targetElement) {
                        // Smooth scroll to destination
                        targetElement.scrollIntoView({
                            behavior: 'smooth'
                        });

                        // Delete simbol # from url
                        history.pushState(null, null, ' '); 
                    }
                });
            });
        </script>

        <style is:global>
            .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s ease; }
            .reveal.active { opacity: 1; transform: translateY(0); }

			<style is:global>
            .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s ease; }
            .reveal.active { opacity: 1; transform: translateY(0); }
            
            /* Doodle Light Mode */
            body {
                background-color: #FFDE59;
                /* tech doodle */
                background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M54.627 0l.83.828-1.415 1.415L51.8 0h2.827zM5.373 0l-.83.828L5.96 2.243 8.2 0H5.374zM48.97 0l3.657 3.657-1.414 1.414L46.143 0h2.828zM11.03 0L7.372 3.657 8.787 5.07 13.857 0h-2.828zM43.314 0L49 5.686l-1.414 1.414L40.485 0h2.83zM16.686 0L11 5.686l1.414 1.414L19.515 0h-2.83zM37.657 0l9.9 9.9-1.415 1.415L34.83 0h2.828zM22.343 0l-9.9 9.9 1.415 1.415L25.17 0h-2.828zM32 0l12.728 12.728-1.414 1.414L30 0.828 16.686 14.142l-1.414-1.414L28 0h4zM.828 0l12.728 12.728-1.414 1.414L0 2.828v-2zM0 5.657L11.314 16.97l-1.414 1.414L0 8.485v-2.828zM0 11.314l9.9 9.9-1.414 1.414L0 14.142v-2.828zM0 16.97l8.485 8.485-1.414 1.414L0 19.8v-2.83zM0 22.627l7.07 7.07-1.414 1.414L0 25.456v-2.828zM0 28.284l5.657 5.657-1.414 1.414L0 31.113v-2.828zM0 33.94l4.243 4.243-1.414 1.414L0 36.77v-2.83zM0 39.6l2.828 2.828-1.414 1.414L0 42.426v-2.828zM0 45.254l1.414 1.414L0 48.082v-2.828zM0 50.91l.828.828L0 53.74v-2.828zM59.172 0l-12.728 12.728 1.414 1.414L60 2.828v-2zM60 5.657L48.686 16.97l1.414 1.414L60 8.485v-2.828zM60 11.314l-9.9 9.9 1.414 1.414L60 14.142v-2.828zM60 16.97l-8.485 8.485 1.414 1.414L60 19.8v-2.83zM60 22.627l-7.07 7.07 1.414 1.414L60 25.456v-2.828zM60 28.284l-5.657 5.657 1.414 1.414L60 31.113v-2.828zM60 33.94l-4.243 4.243 1.414 1.414L60 36.77v-2.83zM60 39.6l-2.828 2.828 1.414 1.414L60 42.426v-2.828zM60 45.254l-1.414 1.414L60 48.082v-2.828zM60 50.91l-.828.828L60 53.74v-2.828zM.828 60L0 59.172v-2.828L3.657 60H.828zM0 53.515l6.485 6.485H3.657L0 56.343v-2.828zM0 50.686l9.314 9.314h-2.828L0 53.515v-2.828zM0 47.858l12.142 12.142H9.314L0 50.686v-2.828zM0 45.03l14.97 14.97h-2.828L0 47.858v-2.828zM0 42.2l17.8 17.8h-2.827L0 45.03v-2.828zM0 39.373l20.627 20.627h-2.828L0 42.2v-2.828zM0 36.544l23.456 23.456h-2.828L0 39.373v-2.828zM0 33.716l26.284 26.284h-2.828L0 36.544v-2.828zM0 30.888l29.112 29.112h-2.828L0 33.716v-2.828zM0 28.06l31.94 31.94h-2.828L0 30.888v-2.828zM0 25.232l34.77 34.77h-2.828L0 28.06v-2.828zM0 22.402l37.598 37.598h-2.828L0 25.232v-2.828zM0 19.574l40.426 40.426h-2.828L0 22.402v-2.828zM0 16.745l43.254 43.254h-2.828L0 19.574v-2.828zM0 13.917l46.083 46.083h-2.828L0 16.745v-2.828zM0 11.088l48.912 48.912h-2.828L0 13.917v-2.828zM0 8.26l51.74 51.74h-2.828L0 11.088v-2.828zM0 5.432l54.568 54.568h-2.828L0 8.26v-2.828zM0 2.604l57.396 57.396h-2.828L0 5.432v-2.828zM60.828 60L60 59.172v-2.828l3.657 3.657h-2.828zM60 53.515l6.485 6.485h-2.828L60 56.343v-2.828zM60 50.686l9.314 9.314h-2.828L60 53.515v-2.828zM60 47.858l12.142 12.142h-2.828L60 50.686v-2.828zM60 45.03l14.97 14.97h-2.828L60 47.858v-2.828zM60 42.2l17.8 17.8h-2.827L60 45.03v-2.828zM60 39.373l20.627 20.627h-2.828L60 42.2v-2.828zM60 36.544l23.456 23.456h-2.828L60 39.373v-2.828zM60 33.716l26.284 26.284h-2.828L60 36.544v-2.828zM60 30.888l29.112 29.112h-2.828L60 33.716v-2.828zM60 28.06l31.94 31.94h-2.828L60 30.888v-2.828zM60 25.232l34.77 34.77h-2.828L60 28.06v-2.828zM60 22.402l37.598 37.598h-2.828L60 25.232v-2.828zM60 19.574l40.426 40.426h-2.828L60 22.402v-2.828zM60 16.745l43.254 43.254h-2.828L60 19.574v-2.828zM60 13.917l46.083 46.083h-2.828L60 16.745v-2.828zM60 11.088l48.912 48.912h-2.828L60 13.917v-2.828zM60 8.26l51.74 51.74h-2.828L60 11.088v-2.828zM60 5.432l54.568 54.568h-2.828L60 8.26v-2.828zM60 2.604l57.396 57.396h-2.828L60 5.432v-2.828z'%3E%3C/path%3E%3C/svg%3E");
                background-size: 60px 60px; /* Pola Size */
                background-blend-mode: soft-light; 
            }

            /* Doodle Dark Mode */
            html.dark body {
                background-color: #1a1a1a;
                background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M54.627 0l.83.828-1.415 1.415L51.8 0h2.827zM5.373 0l-.83.828L5.96 2.243 8.2 0H5.374zM48.97 0l3.657 3.657-1.414 1.414L46.143 0h2.828zM11.03 0L7.372 3.657 8.787 5.07 13.857 0h-2.828zM43.314 0L49 5.686l-1.414 1.414L40.485 0h2.83zM16.686 0L11 5.686l1.414 1.414L19.515 0h-2.83zM37.657 0l9.9 9.9-1.415 1.415L34.83 0h2.828zM22.343 0l-9.9 9.9 1.415 1.415L25.17 0h-2.828zM32 0l12.728 12.728-1.414 1.414L30 0.828 16.686 14.142l-1.414-1.414L28 0h4zM.828 0l12.728 12.728-1.414 1.414L0 2.828v-2zM0 5.657L11.314 16.97l-1.414 1.414L0 8.485v-2.828zM0 11.314l9.9 9.9-1.414 1.414L0 14.142v-2.828zM0 16.97l8.485 8.485-1.414 1.414L0 19.8v-2.83zM0 22.627l7.07 7.07-1.414 1.414L0 25.456v-2.828zM0 28.284l5.657 5.657-1.414 1.414L0 31.113v-2.828zM0 33.94l4.243 4.243-1.414 1.414L0 36.77v-2.83zM0 39.6l2.828 2.828-1.414 1.414L0 42.426v-2.828zM0 45.254l1.414 1.414L0 48.082v-2.828zM0 50.91l.828.828L0 53.74v-2.828zM59.172 0l-12.728 12.728 1.414 1.414L60 2.828v-2zM60 5.657L48.686 16.97l1.414 1.414L60 8.485v-2.828zM60 11.314l-9.9 9.9 1.414 1.414L60 14.142v-2.828zM60 16.97l-8.485 8.485 1.414 1.414L60 19.8v-2.83zM60 22.627l-7.07 7.07 1.414 1.414L60 25.456v-2.828zM60 28.284l-5.657 5.657 1.414 1.414L60 31.113v-2.828zM60 33.94l-4.243 4.243 1.414 1.414L60 36.77v-2.83zM60 39.6l-2.828 2.828 1.414 1.414L60 42.426v-2.828zM60 45.254l-1.414 1.414L60 48.082v-2.828zM60 50.91l-.828.828L60 53.74v-2.828zM.828 60L0 59.172v-2.828L3.657 60H.828zM0 53.515l6.485 6.485H3.657L0 56.343v-2.828zM0 50.686l9.314 9.314h-2.828L0 53.515v-2.828zM0 47.858l12.142 12.142H9.314L0 50.686v-2.828zM0 45.03l14.97 14.97h-2.828L0 47.858v-2.828zM0 42.2l17.8 17.8h-2.827L0 45.03v-2.828zM0 39.373l20.627 20.627h-2.828L0 42.2v-2.828zM0 36.544l23.456 23.456h-2.828L0 39.373v-2.828zM0 33.716l26.284 26.284h-2.828L0 36.544v-2.828zM0 30.888l29.112 29.112h-2.828L0 33.716v-2.828zM0 28.06l31.94 31.94h-2.828L0 30.888v-2.828zM0 25.232l34.77 34.77h-2.828L0 28.06v-2.828zM0 22.402l37.598 37.598h-2.828L0 25.232v-2.828zM0 19.574l40.426 40.426h-2.828L0 22.402v-2.828zM0 16.745l43.254 43.254h-2.828L0 19.574v-2.828zM0 13.917l46.083 46.083h-2.828L0 16.745v-2.828zM0 11.088l48.912 48.912h-2.828L0 13.917v-2.828zM0 8.26l51.74 51.74h-2.828L0 11.088v-2.828zM0 5.432l54.568 54.568h-2.828L0 8.26v-2.828zM60.828 60L60 59.172v-2.828l3.657 3.657h-2.828zM60 53.515l6.485 6.485h-2.828L60 56.343v-2.828zM60 50.686l9.314 9.314h-2.828L60 53.515v-2.828zM60 47.858l12.142 12.142h-2.828L60 50.686v-2.828zM60 45.03l14.97 14.97h-2.828L60 47.858v-2.828zM60 42.2l17.8 17.8h-2.827L60 45.03v-2.828zM60 39.373l20.627 20.627h-2.828L60 42.2v-2.828zM60 36.544l23.456 23.456h-2.828L60 39.373v-2.828zM60 33.716l26.284 26.284h-2.828L60 36.544v-2.828zM60 30.888l29.112 29.112h-2.828L60 33.716v-2.828zM60 28.06l31.94 31.94h-2.828L60 30.888v-2.828zM60 25.232l34.77 34.77h-2.828L0 28.06v-2.828zM60 22.402l37.598 37.598h-2.828L60 25.232v-2.828zM60 19.574l40.426 40.426h-2.828L60 22.402v-2.828zM60 16.745l43.254 43.254h-2.828L60 19.574v-2.828zM60 13.917l46.083 46.083h-2.828L60 16.745v-2.828zM60 11.088l48.912 48.912h-2.828L60 13.917v-2.828zM60 8.26l51.74 51.74h-2.828L60 11.088v-2.828zM60 5.432l54.568 54.568h-2.828L60 8.26v-2.828zM60 2.604l57.396 57.396h-2.828L60 5.432v-2.828z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
                background-blend-mode: soft-light;
            }
        </style>

        <BackToTop />
    </body>
</html>